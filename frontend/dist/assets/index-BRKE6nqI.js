import{ad as ot,ae as e,r,af as te,ag as it,ah as st,ai as rt,aj as De,ak as _,al as lt,am as dt,an as ct,ao as pt,ap as Ue,aq as He,ar as xt,as as gt,at as ut,au as ft,av as ht,aw as mt,ax as yt,ay as bt,az as jt,aA as xe,aB as ge,aC as Be,aD as vt,aE as wt,aF as je,aG as ze,aH as St,aI as Ct,aJ as ee,aK as kt,R as It,aL as zt}from"./vendor-DfIPIlLA.js";import{R as se,B as Te,C as me,X as ye,Y as be,T as re,a as We,P as qe,b as Ve,c as $e,L as Tt,d as Wt}from"./recharts-CFeGQCGJ.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const p of s)if(p.type==="childList")for(const j of p.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&a(j)}).observe(document,{childList:!0,subtree:!0});function o(s){const p={};return s.integrity&&(p.integrity=s.integrity),s.referrerPolicy&&(p.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?p.credentials="include":s.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(s){if(s.ep)return;s.ep=!0;const p=o(s);fetch(s.href,p)}})();const Rt="/api",w=ot.create({baseURL:Rt,headers:{"Content-Type":"application/json"}});w.interceptors.request.use(t=>{const i=localStorage.getItem("token");return i&&(t.headers.Authorization=`Bearer ${i}`),t});w.interceptors.response.use(t=>t,t=>{var o;const i=(o=t.response)==null?void 0:o.status;if(i===401||i===403){localStorage.removeItem("token"),localStorage.removeItem("user");const a=window.location.pathname;a.startsWith("/admin")?a!=="/admin/login"&&(window.location.href="/admin/login"):a.startsWith("/staff")&&a!=="/staff/login"&&(window.location.href="/staff/login")}return Promise.reject(t)});function de(){const t=localStorage.getItem("user");if(t==null||t===""||t==="undefined")return null;try{return JSON.parse(t)}catch{return null}}const Ae="queueEntry",Pe="queueDate",Ge=t=>{const i=new Date().toISOString().split("T")[0];localStorage.setItem(Ae,JSON.stringify(t)),localStorage.setItem(Pe,i)},ve=()=>{const t=localStorage.getItem(Ae),i=localStorage.getItem(Pe),o=new Date().toISOString().split("T")[0];if(!t||i!==o)return i!==o&&ue(),null;try{return JSON.parse(t)}catch{return ue(),null}},ue=()=>{localStorage.removeItem(Ae),localStorage.removeItem(Pe)};function Q({label:t,error:i,...o}){return e.jsxs("div",{style:{marginBottom:"16px"},children:[t&&e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:t}),e.jsx("input",{style:{width:"100%",padding:"12px",borderRadius:"8px",border:i?"2px solid #ef4444":"2px solid #e2e8f0",fontSize:"16px",transition:"border-color 0.2s"},...o}),i&&e.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:"#ef4444"},children:i})]})}function N({children:t,onClick:i,variant:o="primary",disabled:a=!1,fullWidth:s=!1,icon:p,iconPosition:j="left",type:h,style:c,...f}){const u={padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:a?"not-allowed":"pointer",transition:"all 0.2s",opacity:a?.6:1,width:s?"100%":"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:o==="primary"||o==="success"||o==="danger"||o==="gradient"?"0 2px 4px rgba(0,0,0,0.1)":"none",...c},l={primary:{background:a?"#cbd5e1":"#2563eb",color:"white"},gradient:{background:a?"#cbd5e1":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:a?"none":"0 4px 12px rgba(102, 126, 234, 0.4)"},secondary:{background:a?"#cbd5e1":"#64748b",color:"white"},success:{background:a?"#cbd5e1":"#10b981",color:"white"},danger:{background:a?"#cbd5e1":"#ef4444",color:"white"},outline:{background:"transparent",color:a?"#cbd5e1":"#2563eb",border:`2px solid ${a?"#cbd5e1":"#2563eb"}`}},b=l[o]||l.primary,S=p&&e.jsx(p,{size:18,strokeWidth:2.5}),I=j==="left"?e.jsxs(e.Fragment,{children:[" ",S," ",t," "]}):e.jsxs(e.Fragment,{children:[" ",t," ",S," "]});return e.jsx("button",{type:h||"button",style:{...u,...b},onClick:a?void 0:i,disabled:a,onMouseOver:g=>{a||(o==="primary"?(g.target.style.background="#1e40af",g.target.style.boxShadow="0 4px 8px rgba(37, 99, 235, 0.3)"):o==="outline"?g.target.style.background="#eff6ff":o==="danger"?(g.target.style.background="#dc2626",g.target.style.boxShadow="0 4px 8px rgba(239, 68, 68, 0.3)"):o==="success"?(g.target.style.background="#059669",g.target.style.boxShadow="0 4px 8px rgba(16, 185, 129, 0.3)"):o==="gradient"&&(g.target.style.background="linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%)",g.target.style.boxShadow="0 6px 16px rgba(102, 126, 234, 0.5)"))},onMouseOut:g=>{a||(g.target.style.background=b.background,g.target.style.boxShadow=o==="gradient"?"0 4px 12px rgba(102, 126, 234, 0.4)":o==="primary"||o==="success"||o==="danger"?"0 2px 4px rgba(0,0,0,0.1)":"none")},...f,children:I})}function ne(){return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})}function ae({size:t="medium",showText:i=!0}){const[o,a]=r.useState(null),[s,p]=r.useState(!0),[j,h]=r.useState(!1);r.useEffect(()=>{c();const l=setInterval(c,3e4);return()=>clearInterval(l)},[]);const c=async()=>{try{const l=await w.get("/admin/settings/logo");if(l.data.logoUrl){let b=l.data.logoUrl;b&&!b.startsWith("http")&&!b.startsWith("/")&&(b="/"+b);const S=b.includes("?")?"&":"?";b=b+S+"_t="+Date.now(),a(b),h(!1)}else a(null),h(!1)}catch(l){console.error("Failed to load logo:",l),h(!0)}finally{p(!1)}},f={small:{width:"80px",height:"40px"},medium:{width:"120px",height:"60px"},large:{width:"180px",height:"90px"}},u=f[t]||f.medium;return s?null:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o&&!j?e.jsx("img",{src:o,alt:"Logo",style:{...u,objectFit:"contain",maxWidth:"100%"},onError:l=>{console.error("Failed to load logo image:",o),h(!0),a(null)}}):e.jsx("div",{style:{...u,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"8px",color:"white",fontWeight:"700",fontSize:t==="small"?"14px":t==="large"?"24px":"18px"},children:"Q"}),i&&e.jsx("span",{style:{fontSize:t==="small"?"18px":t==="large"?"28px":"24px",fontWeight:"700",color:"#1e293b"}})]})}const Dt=[{value:"REGULAR",label:"Regular"},{value:"SENIOR_CITIZEN",label:"Senior Citizen"},{value:"PWD",label:"PWD"},{value:"PREGNANT",label:"Pregnant"}];function Bt(){const t=te(),[i,o]=r.useState(!0),[a,s]=r.useState(!1),[p,j]=r.useState([]),[h,c]=r.useState({clientName:"",clientType:"REGULAR",categoryIds:[],subCategoryIds:[]}),[f,u]=r.useState({});r.useEffect(()=>{l()},[]);const l=async()=>{var m;try{const d=await w.get("/categories");j(Array.isArray((m=d.data)==null?void 0:m.categories)?d.data.categories:[])}catch(d){console.error("Failed to load categories:",d)}finally{o(!1)}},b=r.useMemo(()=>{var C;if(!((C=h.categoryIds)!=null&&C.length))return[];const m=(p||[]).filter(B=>h.categoryIds.includes(B.id)),d=new Map;return m.forEach(B=>{(B.subCategories||[]).forEach(z=>{d.has(z.id)||d.set(z.id,{...z,categoryName:B.name})})}),Array.from(d.values())},[h.categoryIds,p]),S=m=>{const d=h.categoryIds||[],C=d.includes(m)?d.filter(L=>L!==m):[...d,m],B=(p||[]).filter(L=>C.includes(L.id)),z=new Set;B.forEach(L=>{(L.subCategories||[]).forEach(V=>z.add(V.id))}),c({...h,categoryIds:C,subCategoryIds:(h.subCategoryIds||[]).filter(L=>z.has(L))})},I=m=>{const d=h.subCategoryIds||[],C=d.includes(m)?d.filter(B=>B!==m):[...d,m];c({...h,subCategoryIds:C})},g=async m=>{var C,B,z,L;m.preventDefault(),u({});const d={};if(h.clientName.trim()||(d.clientName="Name is required"),(C=h.categoryIds)!=null&&C.length||(d.categoryId="Select at least one category"),Object.keys(d).length>0){u(d);return}s(!0);try{const T=(await w.post("/queue/join",{clientName:h.clientName.trim(),clientType:h.clientType,categoryIds:h.categoryIds,subCategoryIds:(B=h.subCategoryIds)!=null&&B.length?h.subCategoryIds:void 0})).data.queueEntry,A=(T.concernCategories||[T.category]).map(H=>H.name).join(", "),q=(T.concernSubCategories||[]).map(H=>H.name).join(", ")||null;Ge({queueNumber:T.queueNumber,clientName:T.clientName,date:T.date,category:A,subCategory:q,clientType:T.clientType,status:T.status}),t("/success")}catch(V){console.error("Failed to join queue:",V),u({submit:((L=(z=V.response)==null?void 0:z.data)==null?void 0:L.error)||"Failed to join queue"})}finally{s(!1)}};return i?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})}):e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:"Join Queue"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Fill in your details to get a queue number"}),e.jsxs("form",{onSubmit:g,children:[e.jsx(Q,{label:"Your Name",value:h.clientName,onChange:m=>c({...h,clientName:m.target.value}),error:f.clientName,placeholder:"Enter your full name",required:!0}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"10px",color:"#1e293b"},children:"Client Type"}),e.jsx("div",{className:"client-type-pills",children:Dt.map(({value:m,label:d})=>e.jsxs("label",{className:`pill-radio ${h.clientType===m?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"clientType",value:m,checked:h.clientType===m,onChange:()=>c({...h,clientType:m})}),e.jsx("span",{children:d})]},m))})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"10px",color:"#1e293b"},children:["Concern Category ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),f.categoryId&&e.jsx("div",{style:{fontSize:"12px",color:"#ef4444",marginBottom:"8px"},children:f.categoryId}),e.jsx("div",{className:"checkbox-group",children:(p||[]).map(m=>e.jsxs("label",{className:`checkbox-row ${(h.categoryIds||[]).includes(m.id)?"selected":""}`,children:[e.jsx("input",{type:"checkbox",checked:(h.categoryIds||[]).includes(m.id),onChange:()=>S(m.id)}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{children:m.name})]},m.id))})]}),b.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"10px",color:"#1e293b"},children:"Sub-Concern (Optional)"}),e.jsx("div",{className:"checkbox-group",children:b.map(m=>e.jsxs("label",{className:`checkbox-row ${(h.subCategoryIds||[]).includes(m.id)?"selected":""}`,children:[e.jsx("input",{type:"checkbox",checked:(h.subCategoryIds||[]).includes(m.id),onChange:()=>I(m.id)}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{children:m.name})]},m.id))})]}),f.submit&&e.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:f.submit}),e.jsx(N,{type:"submit",variant:"gradient",fullWidth:!0,disabled:a,style:{marginTop:"8px",padding:"14px 24px",fontSize:"16px"},children:a?"Joining...":"Join Queue"})]}),e.jsx("div",{style:{marginTop:"24px",textAlign:"center"},children:e.jsx("a",{href:"/monitor",style:{color:"#2563eb",textDecoration:"none",fontSize:"14px"},children:"View Queue Status â†’"})})]})})}function we(t){if(!t)return"";const i=t.split("-");return i.length>1?i[1]:t}function At(t){return t?t.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" "):""}function Ye({window:t}){const{label:i,staff:o,currentServing:a}=t,s=c=>{const f=c.trim().split(" ");return f.length>=2?(f[0][0]+f[f.length-1][0]).toUpperCase():c.substring(0,2).toUpperCase()},p=(o==null?void 0:o.name)||"â€”",j=a?we(a.queueNumber):null,h=a&&[a.clientName||"",a.clientType?`(${At(a.clientType)})`:""].filter(Boolean).join(" ").trim()||null;return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"2px solid #e2e8f0",transition:"all 0.2s",display:"flex",alignItems:"stretch",gap:"20px",minHeight:"180px"},children:[e.jsx("div",{style:{flex:"0 0 38%",maxWidth:"200px",borderRadius:"12px",overflow:"hidden",background:o!=null&&o.profilePicture?void 0:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:o!=null&&o.profilePicture?e.jsx("img",{src:o.profilePicture,alt:p,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):e.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"32px"},children:s(p)})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minWidth:0},children:[e.jsx("div",{style:{fontSize:"26px",fontWeight:"700",color:"#1e293b",marginBottom:"4px"},children:p}),a?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"22px",fontWeight:"700",color:"#1e293b",marginBottom:"8px"},children:"is now serving:"}),e.jsx("div",{style:{fontSize:"clamp(48px, 8vw, 84px)",fontWeight:"700",color:"#1e293b",lineHeight:1.1,marginBottom:"8px"},children:j}),h&&e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#475569",marginBottom:"8px"},children:h})]}):e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#94a3b8",fontStyle:"italic"},children:"No active service"}),e.jsx("div",{style:{marginTop:"auto",paddingTop:"12px",fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:i})]})]})}function _e({clientType:t}){const i={REGULAR:{bg:"#e2e8f0",color:"#475569"},SENIOR_CITIZEN:{bg:"#fef3c7",color:"#92400e"},PWD:{bg:"#dbeafe",color:"#1e40af"},PREGNANT:{bg:"#fce7f3",color:"#9f1239"}},o={REGULAR:"Regular",SENIOR_CITIZEN:"Senior",PWD:"PWD",PREGNANT:"Pregnant"},a=i[t]||i.REGULAR;return e.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:a.bg,color:a.color},children:o[t]})}function Pt(){const t=te(),[i,o]=r.useState(null),[a,s]=r.useState([]),[p,j]=r.useState(!0),[h,c]=r.useState(0);r.useEffect(()=>{const b=ve();if(!b){t("/");return}o(b),f();const S=setInterval(f,2e3);return()=>clearInterval(S)},[t]),r.useEffect(()=>{(i==null?void 0:i.status)==="SERVED"&&t("/thank-you")},[i==null?void 0:i.status,t]);const f=async()=>{var b;try{const S=ve()||i;if(S!=null&&S.queueNumber){const m=(await w.get(`/queue/${S.queueNumber}`)).data.queueEntry,d={...S,status:m.status};if(o(d),Ge(d),m.status==="SERVED"){t("/thank-you");return}if(m.status==="WAITING")try{const C=await w.get(`/queue/${S.queueNumber}/ahead`);c(C.data.peopleAhead||0)}catch{const B=await w.get("/queue/public/stats");c(B.data.waiting||0)}else c(0)}const I=await w.get("/queue/public/windows");s(I.data.windows)}catch(S){console.error("Failed to load data:",S),((b=S.response)==null?void 0:b.status)===404&&(ue(),t("/"))}finally{j(!1)}};if(p||!i)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})});const u={WAITING:{bg:"#fef3c7",color:"#92400e",text:"Waiting"},NOW_SERVING:{bg:"#dbeafe",color:"#1e40af",text:"Being served"},SERVED:{bg:"#d1fae5",color:"#065f46",text:"Served"},SKIPPED:{bg:"#fee2e2",color:"#991b1b",text:"Skipped"}},l=u[i.status]||u.WAITING;return e.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:["Hello, ",i.clientName]}),e.jsx("div",{style:{fontSize:"48px",fontWeight:"700",color:"#2563eb",marginBottom:"16px",letterSpacing:"2px"},children:we(i.queueNumber)}),e.jsx("div",{style:{display:"inline-block",padding:"8px 16px",borderRadius:"20px",backgroundColor:l.bg,color:l.color,fontSize:"14px",fontWeight:"600",marginBottom:"16px"},children:l.text}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(_e,{clientType:i.clientType}),e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:"#e2e8f0",color:"#475569"},children:[i.category,i.subCategory&&` - ${i.subCategory}`]})]}),i.status==="WAITING"&&h>0&&e.jsxs("div",{style:{marginTop:"16px",fontSize:"14px",color:"#64748b"},children:["Approximately ",h," ",h===1?"person":"people"," ahead"]}),e.jsx("div",{style:{marginTop:"24px",padding:"16px",background:"#f1f5f9",borderRadius:"8px",fontSize:"14px",color:"#475569"},children:"ðŸ’¡ You can leave and monitor your queue status from this page. We'll update automatically."})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",color:"#1e293b"},children:"Active Windows"}),e.jsx("div",{className:"grid-responsive",style:{display:"grid",gap:"16px"},children:a.length>0?a.map(b=>e.jsx(Ye,{window:b},b.id)):e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",background:"white",borderRadius:"12px",color:"#64748b"},children:"No active windows at the moment"})})]})]})})}function Nt(){const t=te();r.useEffect(()=>{const o=ve();if(!o||o.status!=="SERVED"){t("/");return}const a=setTimeout(()=>{ue()},5e3);return()=>clearTimeout(a)},[t]);const i=ve();return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"48px",maxWidth:"600px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("div",{style:{fontSize:"64px",marginBottom:"24px"},children:"âœ…"}),e.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"16px",color:"#1e293b"},children:"Thank You!"}),i&&e.jsxs("p",{style:{fontSize:"18px",color:"#64748b",marginBottom:"24px"},children:["Thank you, ",e.jsx("strong",{children:i.clientName}),", for your visit."]}),e.jsx("p",{style:{fontSize:"16px",color:"#475569",marginBottom:"32px",lineHeight:"1.6"},children:"We appreciate your business and look forward to serving you again."}),e.jsx("div",{style:{padding:"20px",background:"#f1f5f9",borderRadius:"12px",marginBottom:"32px"},children:e.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Your service has been completed. Have a wonderful day!"})}),e.jsx("button",{onClick:()=>{ue(),t("/")},style:{padding:"12px 32px",borderRadius:"8px",border:"none",background:"#2563eb",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:o=>{o.target.style.background="#1e40af"},onMouseOut:o=>{o.target.style.background="#2563eb"},children:"Return to Home"})]})})}function Et(){const[t,i]=r.useState([]),[o,a]=r.useState([]),[s,p]=r.useState(null),[j,h]=r.useState(!0),[c,f]=r.useState(!1),u=r.useRef(null),l=r.useRef([]),b=r.useRef(!1),S=r.useRef([]),I=r.useRef(!1),[g,m]=r.useState(null),[d,C]=r.useState("");r.useEffect(()=>{B(),z(),L();const n=setInterval(B,2e3);return()=>clearInterval(n)},[]),r.useEffect(()=>{v()},[]),r.useEffect(()=>{o.length>0&&!s&&p(o[0])},[o,s]),r.useEffect(()=>{if(u.current&&s){const n=u.current,x=()=>{const P=(o.findIndex(O=>O.url===s.url)+1)%o.length;p(o[P])};n.addEventListener("ended",x),n.volume=1,n.load();const k=n.play();return k!==void 0&&k.then(()=>{n.muted=!1}).catch(()=>{n.muted=!0,n.play().catch(console.error)}),()=>{n.removeEventListener("ended",x)}}},[s,o]);const B=async()=>{try{const x=(await w.get("/queue/public/windows")).data.windows||[];try{K(l.current,x)}catch(k){console.error("Failed to run TTS announcements:",k)}i(x),l.current=x}catch(n){console.error("Failed to load windows:",n)}finally{h(!1)}},z=async()=>{try{const n=await w.get("/admin/settings/ding-sound");m(n.data.dingSoundUrl||null)}catch(n){console.error("Failed to load ding sound URL:",n),m(null)}},L=async()=>{try{const n=await w.get("/admin/settings/tts-announcement");n.data.template&&C(n.data.template)}catch(n){console.error("Failed to load TTS announcement template:",n)}},V=n=>{if(typeof window>"u"){n&&setTimeout(n,7e3);return}let k=!1;const W=()=>{k||(k=!0,n&&n())};try{if(g){const O=new Audio(g);O.volume=1,O.addEventListener("ended",W),O.addEventListener("error",G=>{console.error("Failed to play custom ding sound:",G),W()}),O.play().catch(G=>{console.error("Failed to start custom ding sound:",G),W()}),setTimeout(W,7e3);return}const P=window.AudioContext||window.webkitAudioContext;if(P){const O=new P,G=O.createOscillator(),D=O.createOscillator(),Y=O.createGain();G.type="sine",D.type="sine";const U=O.currentTime;G.frequency.setValueAtTime(880,U),D.frequency.setValueAtTime(1175,U+.08),G.connect(Y),D.connect(Y),Y.connect(O.destination),Y.gain.setValueAtTime(1e-4,U),Y.gain.exponentialRampToValueAtTime(.25,U+.03),Y.gain.exponentialRampToValueAtTime(1e-4,U+.4),G.start(U),D.start(U+.08),G.stop(U+.4),D.stop(U+.4),setTimeout(W,500);return}}catch(P){console.error("Failed to play ding sound:",P)}setTimeout(W,7e3)},T=n=>{const x=u.current;x&&(x.volume=Math.max(0,Math.min(1,n)))},A=n=>new Promise(x=>{w.post("/tts",{text:n},{responseType:"arraybuffer"}).then(k=>{const W=k.data;if(!W){x();return}const P=new Blob([W],{type:"audio/mpeg"}),O=URL.createObjectURL(P),G=new Audio(O);G.addEventListener("ended",()=>{URL.revokeObjectURL(O),x()}),G.addEventListener("error",()=>{URL.revokeObjectURL(O),x()}),G.play().catch(()=>x())}).catch(()=>{if(typeof window<"u"&&window.speechSynthesis){const k=new SpeechSynthesisUtterance(n);k.lang="en-US",k.rate=1,k.pitch=1,k.onend=x,k.onerror=x,window.speechSynthesis.cancel(),window.speechSynthesis.speak(k)}else x()})}),q=()=>new Promise(n=>V(n)),H=async()=>{if(I.current||S.current.length===0)return;I.current=!0;const{text:n}=S.current.shift();T(.5),await q(),await A(n),T(1),I.current=!1,S.current.length>0&&H()},K=(n,x)=>{if(typeof window>"u")return;if(!b.current){b.current=!0;return}const k=new Map;(n||[]).forEach(P=>{P&&P.id&&P.currentServing&&k.set(P.id,P.currentServing.queueNumber)});const W=[];(x||[]).forEach(P=>{if(!P||!P.id||!P.currentServing)return;const O=P.currentServing.queueNumber,G=P.currentServing.clientName,D=k.get(P.id);if(!O||O===D)return;const Y=we?we(O):O;let U=Y;const X=parseInt(Y,10);Number.isNaN(X)||(U=String(X));const Se=P.label||"Window",Ce=G?`, or client name ${G}`:"",ke=(d||"Window {{window}} will now serve queue number {{queueNumber}}{{clientNamePart}}.").replace(/{{\s*(window|window number)\s*}}/gi,Se).replace(/{{\s*(queueNumber|queue number)\s*}}/gi,U).replace(/{{\s*clientNamePart\s*}}/gi,Ce).replace(/{{\s*(clientName|client name)\s*}}/gi,G||"");W.push({text:ke})}),W.forEach(P=>S.current.push(P)),H()},v=async()=>{try{const n=await w.get("/videos");a(n.data.videos||[]),f(!1)}catch(n){console.error("Failed to load videos:",n),f(!0),a([])}};return e.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",background:"#f8fafc",overflow:"hidden"},children:[e.jsx("div",{style:{flex:"0 0 50vh",minHeight:0,overflowY:"auto"},children:e.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"8px 0"},children:[e.jsx(ae,{size:"large"}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:0},children:"Queue Monitoring"})]}),j?e.jsx(ne,{}):e.jsx("div",{style:{display:"grid",gap:"16px",marginBottom:"24px"},className:"grid-responsive",children:t.length>0?t.map(n=>e.jsx(Ye,{window:n},n.id)):e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",background:"white",borderRadius:"12px",color:"#64748b"},children:"No active windows at the moment"})})]})}),e.jsx("div",{style:{flex:"0 0 50vh",minHeight:0,background:"#1e293b",display:"flex",flexDirection:"column"},children:o.length>0&&!c?e.jsx("div",{style:{flex:1,minHeight:0,position:"relative",background:"#000"},children:e.jsx("video",{ref:u,src:s==null?void 0:s.url,controls:!0,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"contain"}})}):e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 40px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"18px",fontWeight:"500",marginBottom:"8px"},children:"No video playlist set yet"}),e.jsx("div",{style:{color:"#64748b",fontSize:"14px"},children:"Please configure the video folder path in the admin settings"})]})})]})}function Ft(){const t=te(),[i,o]=r.useState({username:"",password:""}),[a,s]=r.useState(""),[p,j]=r.useState(!1);r.useEffect(()=>{const c=localStorage.getItem("token"),f=de();c&&(f==null?void 0:f.role)==="STAFF"&&t("/staff/dashboard")},[t]);const h=async c=>{var f,u;c.preventDefault(),s(""),j(!0);try{const l=await w.post("/auth/staff/login",i);localStorage.setItem("token",l.data.token),localStorage.setItem("user",JSON.stringify(l.data.user)),t("/staff/dashboard")}catch(l){s(((u=(f=l.response)==null?void 0:f.data)==null?void 0:u.error)||"Login failed")}finally{j(!1)}};return e.jsxs("div",{className:"staff-login-root",style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",paddingLeft:"max(20px, env(safe-area-inset-left))",paddingRight:"max(20px, env(safe-area-inset-right))"},children:[e.jsx("style",{children:`
        @media (max-width: 480px) {
          .staff-login-root { padding: 16px !important; }
          .staff-login-card { padding: 24px !important; }
          .staff-login-title { font-size: 22px !important; }
        }
      `}),e.jsxs("div",{className:"staff-login-card",style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("h1",{className:"staff-login-title",style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:"Staff Login"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Sign in to manage your queue"}),e.jsxs("form",{onSubmit:h,children:[e.jsx(Q,{label:"Username",value:i.username,onChange:c=>o({...i,username:c.target.value}),placeholder:"Enter your username",required:!0,autoFocus:!0}),e.jsx(Q,{label:"Password",type:"password",value:i.password,onChange:c=>o({...i,password:c.target.value}),placeholder:"Enter your password",required:!0}),a&&e.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:a}),e.jsx(N,{type:"submit",fullWidth:!0,disabled:p,children:p?"Logging in...":"Login"})]})]})]})}function Re({label:t,error:i,children:o,...a}){return e.jsxs("div",{style:{marginBottom:"16px"},children:[t&&e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:t}),e.jsx("select",{style:{width:"100%",padding:"12px",borderRadius:"8px",border:i?"2px solid #ef4444":"2px solid #e2e8f0",fontSize:"16px",backgroundColor:"white",cursor:"pointer"},...a,children:o}),i&&e.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:"#ef4444"},children:i})]})}function Ot({onProfileClick:t,onLogout:i}){const[o,a]=r.useState(!1),[s,p]=r.useState(null),[j,h]=r.useState(!0),c=r.useRef(null);r.useEffect(()=>{f()},[]),r.useEffect(()=>{const l=b=>{c.current&&!c.current.contains(b.target)&&a(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const f=async()=>{try{const l=await w.get("/staff/profile");p(l.data.staff)}catch(l){console.error("Failed to load profile:",l)}finally{h(!1)}},u=l=>{if(!l)return"?";const b=l.trim().split(" ");return b.length>=2?(b[0][0]+b[b.length-1][0]).toUpperCase():l.substring(0,2).toUpperCase()};return j?e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0"}}):e.jsxs("div",{style:{position:"relative"},ref:c,children:[e.jsx("button",{onClick:()=>a(!o),style:{width:"44px",height:"44px",minWidth:"44px",minHeight:"44px",borderRadius:"50%",border:"2px solid #e2e8f0",background:s!=null&&s.profilePicture?`url(${s.profilePicture}) center/cover`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"700",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.2s"},onMouseOver:l=>{l.target.style.borderColor="#2563eb",l.target.style.transform="scale(1.05)"},onMouseOut:l=>{l.target.style.borderColor="#e2e8f0",l.target.style.transform="scale(1)"},children:!(s!=null&&s.profilePicture)&&u(s==null?void 0:s.name)}),o&&e.jsxs("div",{style:{position:"absolute",top:"48px",right:0,background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"160px",zIndex:1e3,border:"1px solid #e2e8f0",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:(s==null?void 0:s.name)||"Staff"}),e.jsx("button",{onClick:()=>{a(!1),t()},style:{width:"100%",padding:"14px 16px",minHeight:"44px",border:"none",background:"transparent",textAlign:"left",fontSize:"14px",color:"#1e293b",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center"},onMouseOver:l=>{l.target.style.background="#f1f5f9"},onMouseOut:l=>{l.target.style.background="transparent"},children:"Profile"}),e.jsx("button",{onClick:()=>{a(!1),i()},style:{width:"100%",padding:"14px 16px",minHeight:"44px",border:"none",background:"transparent",textAlign:"left",fontSize:"14px",color:"#ef4444",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center"},onMouseOver:l=>{l.target.style.background="#fee2e2"},onMouseOut:l=>{l.target.style.background="transparent"},children:"Logout"})]})]})}const Fe={success:{icon:De,color:"#10b981",bg:"#d1fae5"},error:{icon:rt,color:"#ef4444",bg:"#fee2e2"},warning:{icon:st,color:"#f59e0b",bg:"#fef3c7"},info:{icon:it,color:"#2563eb",bg:"#dbeafe"}};let Lt=0;const le=[],pe=[];function Qe(t,i="info",o=3e3){const a=Lt++,s={id:a,message:t,type:i,duration:o};return le.push(s),pe.forEach(p=>p([...le])),o>0&&setTimeout(()=>{Je(a)},o),a}function Je(t){const i=le.findIndex(o=>o.id===t);i>-1&&(le.splice(i,1),pe.forEach(o=>o([...le])))}function $(t,i){return Qe(t,"success",i)}function M(t,i){return Qe(t,"error",i)}function Mt(){const[t,i]=r.useState([]);return r.useEffect(()=>{const o=a=>{i(a)};return pe.push(o),i([...le]),()=>{const a=pe.indexOf(o);a>-1&&pe.splice(a,1)}},[]),e.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:[(t||[]).map(o=>{const a=Fe[o.type]||Fe.info,s=a.icon;return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px 20px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",gap:"12px",minWidth:"300px",maxWidth:"400px",pointerEvents:"auto",animation:"slideIn 0.3s ease-out",borderLeft:`4px solid ${a.color}`},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:a.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(s,{size:16,color:a.color})}),e.jsx("div",{style:{flex:1,fontSize:"14px",color:"#1e293b",lineHeight:"1.5"},children:o.message}),e.jsx("button",{onClick:()=>Je(o.id),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b",transition:"color 0.2s"},onMouseOver:p=>{p.target.style.color="#1e293b"},onMouseOut:p=>{p.target.style.color="#64748b"},children:e.jsx(_,{size:18})})]},o.id)}),e.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})}function fe({open:t,title:i,message:o,onConfirm:a,onCancel:s,confirmText:p="Confirm",cancelText:j="Cancel",variant:h="danger"}){if(!t)return null;const c={danger:{confirmBg:"#ef4444",confirmHover:"#dc2626"},warning:{confirmBg:"#f59e0b",confirmHover:"#d97706"},info:{confirmBg:"#2563eb",confirmHover:"#1e40af"}},f=c[h]||c.danger;return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease-out"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",animation:"slideUp 0.3s ease-out"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:0},children:i}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px",lineHeight:"1.6"},children:o}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:s,style:{padding:"10px 20px",border:"2px solid #e2e8f0",borderRadius:"8px",background:"transparent",color:"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:u=>{u.target.style.background="#f1f5f9",u.target.style.borderColor="#cbd5e1"},onMouseOut:u=>{u.target.style.background="transparent",u.target.style.borderColor="#e2e8f0"},children:j}),e.jsx("button",{onClick:a,style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:f.confirmBg,color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onMouseOver:u=>{u.target.style.background=f.confirmHover,u.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)"},onMouseOut:u=>{u.target.style.background=f.confirmBg,u.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:p})]})]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})}const Oe=["#2563eb","#10b981","#f59e0b","#ef4444"];function Ut(){const t=te(),[i,o]=r.useState(!0),[a,s]=r.useState(null),[p,j]=r.useState([]),[h,c]=r.useState({}),[f,u]=r.useState([]),[l,b]=r.useState(null),[S,I]=r.useState("today");r.useEffect(()=>{const v=localStorage.getItem("token"),n=de();if(!v||(n==null?void 0:n.role)!=="STAFF"){t("/staff/login");return}g(),m();const x=setInterval(g,3e3);return()=>clearInterval(x)},[t]),r.useEffect(()=>{S&&d()},[S]);const g=async()=>{var v;try{const n=await w.get("/staff/dashboard");s(n.data.window),j(n.data.queue||[]),c(n.data.stats||{})}catch(n){console.error("Failed to load dashboard:",n),((v=n.response)==null?void 0:v.status)===401&&t("/staff/login")}finally{o(!1)}},m=async()=>{try{const v=await w.get("/windows/active");u(v.data.windows||[])}catch(v){console.error("Failed to load windows:",v)}},d=async()=>{try{let v,n;const x=new Date;if(S==="today")v=x.toISOString().split("T")[0],n=v;else if(S==="yesterday"){const W=new Date(x);W.setDate(W.getDate()-1),v=W.toISOString().split("T")[0],n=v}else v=x.toISOString().split("T")[0],n=v;const k=await w.get(`/staff/analytics?startDate=${v}&endDate=${n}`);b(k.data)}catch(v){console.error("Failed to load analytics:",v)}},C=async v=>{var n,x;try{await w.post("/staff/assign-window",{windowId:v}),g(),m()}catch(k){console.error("Failed to assign window:",k),alert(((x=(n=k.response)==null?void 0:n.data)==null?void 0:x.error)||"Failed to assign window")}},B=async v=>{var n,x,k,W,P;try{await w.post(`/staff/serve/${v}`),g()}catch(O){console.error("Failed to start serving:",O),((n=O.response)==null?void 0:n.status)===409?(M(((k=(x=O.response)==null?void 0:x.data)==null?void 0:k.error)||"Client was already claimed. Refreshing..."),g()):M(((P=(W=O.response)==null?void 0:W.data)==null?void 0:P.error)||"Failed to start serving")}},z=async v=>{var n,x;try{await w.post(`/staff/complete/${v}`),g(),d()}catch(k){console.error("Failed to complete:",k),alert(((x=(n=k.response)==null?void 0:n.data)==null?void 0:x.error)||"Failed to complete")}},L=async v=>{var n,x;if(a.confirm("Mark this client as skipped?"))try{await w.post(`/staff/skip/${v}`),g()}catch(k){console.error("Failed to skip:",k),alert(((x=(n=k.response)==null?void 0:n.data)==null?void 0:x.error)||"Failed to skip")}},V=async()=>{try{await w.get("/staff/dashboard").then(n=>n.data.window)&&await w.post("/staff/assign-window",{windowId:null})}catch(v){console.error("Error deactivating window on logout:",v)}localStorage.removeItem("token"),localStorage.removeItem("user"),t("/staff/login")},T=()=>{t("/staff/profile")};if(i)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})});const A=p.filter(v=>["SENIOR_CITIZEN","PWD","PREGNANT"].includes(v.clientType)),q=p.filter(v=>v.clientType==="REGULAR"),H=l!=null&&l.byCategory?Object.entries(l.byCategory).map(([v,n])=>({name:v,value:n})):[],K=l!=null&&l.byClientType?Object.entries(l.byClientType).map(([v,n])=>({name:v,value:n})):[];return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .staff-dashboard-root {
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        .staff-dashboard-content {
          padding-left: max(24px, env(safe-area-inset-left));
          padding-right: max(24px, env(safe-area-inset-right));
        }
        .queue-item-buttons button {
          min-height: 44px;
        }
        @media (max-width: 768px) {
          .staff-dashboard-header {
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .staff-dashboard-header > div:first-child {
            width: 100%;
            flex-direction: column;
            align-items: flex-start !important;
            gap: 8px !important;
          }
          .staff-dashboard-header-center {
            width: 100%;
            text-align: left;
          }
          .staff-dashboard-main-grid {
            grid-template-columns: 1fr !important;
          }
          .staff-dashboard-content {
            padding: 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .queue-item-grid {
            grid-template-columns: 1fr !important;
            gap: 12px !important;
          }
          .queue-item-buttons {
            flex-direction: row !important;
            width: 100% !important;
            flex-wrap: wrap;
          }
          .queue-item-buttons button {
            flex: 1;
            min-width: 120px;
          }
          .staff-window-assign-grid {
            grid-template-columns: 1fr !important;
          }
        }
        @media (max-width: 480px) {
          .queue-item-buttons {
            flex-direction: column !important;
          }
          .queue-item-buttons button {
            min-width: 100%;
          }
        }
        @media (max-width: 1024px) and (min-width: 769px) {
          .staff-dashboard-main-grid {
            grid-template-columns: 60% 40% !important;
          }
        }
      `}),e.jsxs("div",{className:"staff-dashboard-root",style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsxs("div",{className:"staff-dashboard-header",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flex:1},children:[e.jsx(ae,{size:"small"}),a&&e.jsxs("div",{className:"staff-dashboard-header-center",style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:["Operating: ",a.label]})]}),e.jsx(Ot,{onProfileClick:T,onLogout:V})]}),e.jsxs("div",{className:"staff-dashboard-content",style:{maxWidth:"1400px",margin:"0 auto",padding:"24px"},children:[!a&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Assign Window"}),e.jsx("div",{className:"staff-window-assign-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:f.map(v=>e.jsx(N,{onClick:()=>C(v.id),variant:"outline",children:v.label},v.id))})]}),e.jsxs("div",{className:"staff-dashboard-main-grid",style:{display:"grid",gridTemplateColumns:"75% 25%",gap:"24px"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:["Queue (",p.length,")"]}),A.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#f59e0b",marginBottom:"12px"},children:"Priority Clients"}),A.map(v=>e.jsx(Le,{entry:v,onServe:B,onComplete:z,onSkip:L},v.id))]}),q.length>0&&e.jsxs("div",{children:[A.length>0&&e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#64748b",marginBottom:"12px"},children:"Regular Clients"}),q.map(v=>e.jsx(Le,{entry:v,onServe:B,onComplete:z,onSkip:L},v.id))]}),p.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"No clients in queue"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"In Queue"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#f59e0b"},children:p.length})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Served Today"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#2563eb"},children:h.totalServed||0})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Analytics"}),e.jsxs(Re,{value:S,onChange:v=>I(v.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"})]})]}),l&&e.jsxs(e.Fragment,{children:[H.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"By Category"}),e.jsx(se,{width:"100%",height:200,children:e.jsxs(Te,{data:H,children:[e.jsx(me,{strokeDasharray:"3 3"}),e.jsx(ye,{dataKey:"name"}),e.jsx(be,{}),e.jsx(re,{}),e.jsx(We,{dataKey:"value",fill:"#2563eb"})]})})]}),K.length>0&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"By Client Type"}),e.jsx(se,{width:"100%",height:200,children:e.jsxs(qe,{children:[e.jsx(Ve,{data:K,cx:"50%",cy:"50%",labelLine:!1,label:({name:v,percent:n})=>`${v}: ${(n*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:K.map((v,n)=>e.jsx($e,{fill:Oe[n%Oe.length]},`cell-${n}`))}),e.jsx(re,{})]})})]})]})]})]})]})]})]})]})}function Le({entry:t,onServe:i,onComplete:o,onSkip:a}){var p,j,h;const s=t.status==="NOW_SERVING";return e.jsxs("div",{className:"queue-item-grid",style:{padding:"16px",border:s?"2px solid #2563eb":"1px solid #e2e8f0",borderRadius:"8px",marginBottom:"12px",background:s?"#eff6ff":"white",display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#2563eb",marginBottom:"4px"},children:t.queueNumber}),e.jsx("div",{style:{fontSize:"14px",color:"#1e293b",marginBottom:"4px"},children:t.clientName}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"8px",flexWrap:"wrap"},children:[e.jsx(_e,{clientType:t.clientType}),e.jsxs("span",{style:{fontSize:"12px",color:"#64748b"},children:[((p=t.concernCategories)!=null&&p.length?t.concernCategories:t.category?[t.category]:[]).map(c=>c==null?void 0:c.name).filter(Boolean).join(", "),((j=t.concernSubCategories)!=null&&j.length?t.concernSubCategories:t.subCategory?[t.subCategory]:[]).map(c=>c==null?void 0:c.name).filter(Boolean).length>0&&` - ${((h=t.concernSubCategories)!=null&&h.length?t.concernSubCategories:[t.subCategory]).map(c=>c==null?void 0:c.name).filter(Boolean).join(", ")}`]})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8"},children:["Joined: ",new Date(t.joinedAt).toLocaleTimeString()]})]}),e.jsxs("div",{className:"queue-item-buttons",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[s?e.jsx(N,{variant:"success",icon:De,onClick:()=>o(t.id),style:{fontSize:"12px",padding:"8px 16px",whiteSpace:"nowrap"},children:"Mark as Served"}):e.jsx(N,{variant:"primary",icon:lt,onClick:()=>i(t.id),style:{fontSize:"12px",padding:"8px 16px",whiteSpace:"nowrap"},children:"Start Serving"}),e.jsx(N,{variant:"danger",icon:dt,onClick:()=>a(t.id),style:{fontSize:"12px",padding:"8px 16px",whiteSpace:"nowrap"},children:"Skip"})]})]})}function Ht(){const t=te(),[i,o]=r.useState(!0),[a,s]=r.useState(!1),[p,j]=r.useState(null),[h,c]=r.useState(null),[f,u]=r.useState(null),[l,b]=r.useState(!1),[S,I]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,m]=r.useState(!1);r.useEffect(()=>{const T=localStorage.getItem("token"),A=de();if(!T||(A==null?void 0:A.role)!=="STAFF"){t("/staff/login");return}d()},[t]);const d=async()=>{var T;try{const A=await w.get("/staff/profile");j(A.data.staff),c(A.data.staff.profilePicture)}catch(A){console.error("Failed to load profile:",A),((T=A.response)==null?void 0:T.status)===401&&t("/staff/login")}finally{o(!1)}},C=T=>{const A=T.target.files[0];if(A){const q=new FileReader;q.onloadend=()=>{u(q.result)},q.readAsDataURL(A),c(A)}},B=async T=>{var A,q;T.preventDefault(),s(!0);try{if(await w.put("/staff/profile",{name:p.name}),h instanceof File){const H=new FormData;H.append("picture",h);const K=await w.post("/staff/profile/picture",H,{headers:{"Content-Type":"multipart/form-data"}});c(K.data.profilePicture),u(null)}$("Profile updated successfully!"),t("/staff/dashboard")}catch(H){console.error("Failed to update profile:",H),M(((q=(A=H.response)==null?void 0:A.data)==null?void 0:q.error)||"Failed to update profile")}finally{s(!1)}},z=async T=>{var A,q;if(T.preventDefault(),S.newPassword!==S.confirmPassword){M("New passwords do not match");return}if(S.newPassword.length<6){M("Password must be at least 6 characters");return}m(!0);try{await w.post("/staff/profile/change-password",{currentPassword:S.currentPassword,newPassword:S.newPassword}),$("Password changed successfully!"),b(!1),I({currentPassword:"",newPassword:"",confirmPassword:""})}catch(H){console.error("Failed to change password:",H),M(((q=(A=H.response)==null?void 0:A.data)==null?void 0:q.error)||"Failed to change password")}finally{m(!1)}};if(i)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})});const L=T=>{if(!T)return"?";const A=T.trim().split(" ");return A.length>=2?(A[0][0]+A[A.length-1][0]).toUpperCase():T.substring(0,2).toUpperCase()},V=f||(p!=null&&p.profilePicture?p.profilePicture:null);return e.jsxs("div",{className:"staff-profile-root",style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsx("style",{children:`
        .staff-profile-root {
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        @media (max-width: 768px) {
          .staff-profile-header {
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .staff-profile-content {
            margin: 24px auto !important;
            padding: 0 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .staff-profile-card {
            padding: 24px !important;
          }
          .staff-profile-buttons {
            flex-direction: column !important;
          }
          .staff-profile-buttons button {
            width: 100%;
          }
        }
      `}),e.jsxs("div",{className:"staff-profile-header",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ae,{size:"small"}),e.jsx(N,{variant:"outline",onClick:()=>t("/staff/dashboard"),children:"Back to Dashboard"})]}),e.jsx("div",{className:"staff-profile-content",style:{maxWidth:"600px",margin:"40px auto",padding:"0 24px"},children:e.jsxs("div",{className:"staff-profile-card",style:{background:"white",borderRadius:"12px",padding:"32px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"32px",color:"#1e293b"},children:"My Profile"}),e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",margin:"0 auto 16px",border:"3px solid #e2e8f0",background:V?`url(${V}) center/cover`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"700",fontSize:"36px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:!V&&L(p==null?void 0:p.name)}),e.jsxs("label",{style:{display:"inline-block",padding:"8px 16px",background:"#2563eb",color:"white",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:T=>{T.target.style.background="#1e40af"},onMouseOut:T=>{T.target.style.background="#2563eb"},children:["Change Picture",e.jsx("input",{type:"file",accept:"image/*",onChange:C,style:{display:"none"}})]}),e.jsx("p",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:"JPG, PNG, GIF, WebP (max 2MB)"})]}),e.jsx(Q,{label:"Name",value:(p==null?void 0:p.name)||"",onChange:T=>j({...p,name:T.target.value}),required:!0}),e.jsx(Q,{label:"Username",value:(p==null?void 0:p.username)||"",disabled:!0,style:{background:"#f1f5f9"}}),e.jsxs("div",{className:"staff-profile-buttons",style:{display:"flex",gap:"12px",marginTop:"24px"},children:[e.jsx(N,{type:"submit",disabled:a,fullWidth:!0,children:a?"Saving...":"Save Changes"}),e.jsx(N,{variant:"outline",onClick:()=>t("/staff/dashboard"),fullWidth:!0,children:"Cancel"})]})]}),e.jsxs("div",{style:{marginTop:"32px",paddingTop:"32px",borderTop:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Change Password"}),e.jsx(N,{variant:"outline",onClick:()=>{b(!l),l&&I({currentPassword:"",newPassword:"",confirmPassword:""})},children:l?"Cancel":"Change Password"})]}),l&&e.jsxs("form",{onSubmit:z,children:[e.jsx(Q,{label:"Current Password",type:"password",value:S.currentPassword,onChange:T=>I({...S,currentPassword:T.target.value}),required:!0}),e.jsx(Q,{label:"New Password",type:"password",value:S.newPassword,onChange:T=>I({...S,newPassword:T.target.value}),required:!0}),e.jsx(Q,{label:"Confirm New Password",type:"password",value:S.confirmPassword,onChange:T=>I({...S,confirmPassword:T.target.value}),required:!0}),e.jsx(N,{type:"submit",disabled:g,fullWidth:!0,style:{marginTop:"16px"},children:g?"Changing...":"Change Password"})]})]})]})})]})}function qt(){const t=te(),[i,o]=r.useState({username:"",password:""}),[a,s]=r.useState(""),[p,j]=r.useState(!1);r.useEffect(()=>{const c=localStorage.getItem("token"),f=de();c&&(f==null?void 0:f.role)==="ADMIN"&&t("/admin/dashboard")},[t]);const h=async c=>{var f,u;c.preventDefault(),s(""),j(!0);try{const l=await w.post("/auth/admin/login",i);localStorage.setItem("token",l.data.token),localStorage.setItem("user",JSON.stringify(l.data.user)),t("/admin/dashboard")}catch(l){s(((u=(f=l.response)==null?void 0:f.data)==null?void 0:u.error)||"Login failed")}finally{j(!1)}};return e.jsxs("div",{className:"admin-login-root",style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",paddingLeft:"max(20px, env(safe-area-inset-left))",paddingRight:"max(20px, env(safe-area-inset-right))"},children:[e.jsx("style",{children:`
        @media (max-width: 480px) {
          .admin-login-root { padding: 16px !important; }
          .admin-login-card { padding: 24px !important; }
          .admin-login-title { font-size: 22px !important; }
        }
      `}),e.jsxs("div",{className:"admin-login-card",style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("h1",{className:"admin-login-title",style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:"Admin Login"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Sign in to manage the system"}),e.jsxs("form",{onSubmit:h,children:[e.jsx(Q,{label:"Username",value:i.username,onChange:c=>o({...i,username:c.target.value}),placeholder:"Enter your username",required:!0,autoFocus:!0}),e.jsx(Q,{label:"Password",type:"password",value:i.password,onChange:c=>o({...i,password:c.target.value}),placeholder:"Enter your password",required:!0}),a&&e.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:a}),e.jsx(N,{type:"submit",fullWidth:!0,disabled:p,children:p?"Logging in...":"Login"})]})]})]})}function Vt({onLogout:t}){const[i,o]=r.useState(!1),[a,s]=r.useState(null),[p,j]=r.useState(!0),h=r.useRef(null);te(),r.useEffect(()=>{c()},[]),r.useEffect(()=>{const u=l=>{h.current&&!h.current.contains(l.target)&&o(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const c=async()=>{try{const u=de();u&&s({name:u.name||"Admin",username:u.username})}catch(u){console.error("Failed to load profile:",u)}finally{j(!1)}},f=u=>{if(!u)return"A";const l=u.trim().split(" ");return l.length>=2?(l[0][0]+l[l.length-1][0]).toUpperCase():u.substring(0,2).toUpperCase()};return p?e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0"}}):e.jsxs("div",{style:{position:"relative"},ref:h,children:[e.jsx("button",{onClick:()=>o(!i),style:{width:"44px",height:"44px",minWidth:"44px",minHeight:"44px",borderRadius:"50%",border:"2px solid #e2e8f0",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"700",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.2s"},onMouseOver:u=>{u.target.style.borderColor="#2563eb",u.target.style.transform="scale(1.05)"},onMouseOut:u=>{u.target.style.borderColor="#e2e8f0",u.target.style.transform="scale(1)"},children:f(a==null?void 0:a.name)}),i&&e.jsxs("div",{style:{position:"absolute",top:"48px",right:0,background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"160px",zIndex:1e3,border:"1px solid #e2e8f0",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:(a==null?void 0:a.name)||"Admin"}),e.jsx("button",{onClick:()=>{o(!1),t()},style:{width:"100%",padding:"14px 16px",minHeight:"44px",border:"none",background:"transparent",textAlign:"left",fontSize:"14px",color:"#ef4444",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center"},onMouseOver:u=>{u.target.style.background="#fee2e2"},onMouseOut:u=>{u.target.style.background="transparent"},children:"Logout"})]})]})}function $t({open:t,title:i,message:o,placeholder:a="",onConfirm:s,onCancel:p,confirmText:j="Confirm",cancelText:h="Cancel",type:c="text",required:f=!0}){const[u,l]=r.useState("");if(r.useEffect(()=>{t&&l("")},[t]),!t)return null;const b=()=>{f&&!u.trim()||(s(u),l(""))},S=()=>{l(""),p()};return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease-out"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",animation:"slideUp 0.3s ease-out"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:0},children:i}),e.jsx("button",{onClick:S,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),o&&e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px",lineHeight:"1.6"},children:o}),e.jsx("input",{type:c,value:u,onChange:I=>l(I.target.value),placeholder:a,required:f,style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",marginBottom:"24px",transition:"border-color 0.2s"},onFocus:I=>{I.target.style.borderColor="#2563eb"},onBlur:I=>{I.target.style.borderColor="#e2e8f0"},onKeyDown:I=>{I.key==="Enter"?b():I.key==="Escape"&&S()},autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:S,style:{padding:"10px 20px",border:"2px solid #e2e8f0",borderRadius:"8px",background:"transparent",color:"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:I=>{I.target.style.background="#f1f5f9",I.target.style.borderColor="#cbd5e1"},onMouseOut:I=>{I.target.style.background="transparent",I.target.style.borderColor="#e2e8f0"},children:h}),e.jsx("button",{onClick:b,disabled:f&&!u.trim(),style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:f&&!u.trim()?"#cbd5e1":"#2563eb",color:"white",fontSize:"14px",fontWeight:"600",cursor:f&&!u.trim()?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onMouseOver:I=>{f&&!u.trim()||(I.target.style.background="#1e40af",I.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)")},onMouseOut:I=>{f&&!u.trim()||(I.target.style.background="#2563eb",I.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)")},children:j})]})]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})}const Me=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6"];function ie(t,i){var a;const o=(a=t==null?void 0:t.response)==null?void 0:a.data;if(o!=null&&o.error&&typeof o.error=="string")return o.error;if(Array.isArray(o==null?void 0:o.errors)&&o.errors.length>0){const s=o.errors[0];return(s==null?void 0:s.msg)||(s==null?void 0:s.message)||i}return i}function Gt(){const t=te(),[i,o]=r.useState("dashboard"),[a,s]=r.useState(!0),[p,j]=r.useState(null),[h,c]=r.useState([]),[f,u]=r.useState([]),[l,b]=r.useState([]),[S,I]=r.useState(null),[g,m]=r.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],staffIds:[],categoryIds:[],clientTypes:[],startHour:"",endHour:""}),[d,C]=r.useState(!1),[B,z]=r.useState({open:!1,data:{}}),[L,V]=r.useState({open:!1,data:{}}),[T,A]=r.useState({open:!1,data:{}}),[q,H]=r.useState({open:!1,data:{}}),[K,v]=r.useState({open:!1,title:"",message:"",placeholder:"",type:"text",onConfirm:()=>{},onCancel:()=>{}});r.useEffect(()=>{const D=localStorage.getItem("token"),Y=de();if(!D||(Y==null?void 0:Y.role)!=="ADMIN"){t("/admin/login");return}n();const U=setInterval(()=>{i==="dashboard"&&x()},3e3);return()=>clearInterval(U)},[t,i]),r.useEffect(()=>{i==="reports"&&O()},[i,g]);const n=async()=>{try{await Promise.all([x(),k(),W(),P()])}catch(D){console.error("Error loading data:",D)}finally{s(!1)}},x=async()=>{try{const D=await w.get("/admin/dashboard");j(D.data.stats)}catch(D){console.error("Failed to load dashboard:",D)}},k=async()=>{try{const D=await w.get("/admin/staff");c(D.data.staff)}catch(D){console.error("Failed to load staff:",D)}},W=async()=>{try{const D=await w.get("/admin/windows");u(D.data.windows)}catch(D){console.error("Failed to load windows:",D)}},P=async()=>{try{const D=await w.get("/categories");b(D.data.categories)}catch(D){console.error("Failed to load categories:",D)}},O=async()=>{try{const D=new URLSearchParams;D.append("startDate",g.startDate),D.append("endDate",g.endDate),g.staffIds&&g.staffIds.length>0&&g.staffIds.forEach(U=>D.append("staffId",U)),g.categoryIds&&g.categoryIds.length>0&&g.categoryIds.forEach(U=>D.append("categoryId",U)),g.clientTypes&&g.clientTypes.length>0&&g.clientTypes.forEach(U=>D.append("clientType",U)),g.startHour&&D.append("startHour",g.startHour),g.endHour&&D.append("endHour",g.endHour);const Y=await w.get(`/admin/reports?${D.toString()}`);I(Y.data)}catch(D){console.error("Failed to load reports:",D)}},G=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/admin/login")};return a?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .admin-dashboard-root {
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        .admin-dashboard-content {
          padding-left: max(24px, env(safe-area-inset-left));
          padding-right: max(24px, env(safe-area-inset-right));
        }
        @media (max-width: 768px) {
          .admin-dashboard-header {
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .admin-dashboard-header > div:first-child {
            flex-direction: row;
            align-items: center;
            gap: 12px;
          }
          .admin-dashboard-header h1 {
            font-size: 20px !important;
          }
          .admin-dashboard-tabs {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding: 0 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
          }
          .admin-dashboard-tabs button {
            white-space: nowrap;
            font-size: 13px;
            padding: 10px 16px !important;
            min-height: 44px;
            flex-shrink: 0;
          }
          .admin-dashboard-tabs button span {
            display: none;
          }
          .admin-dashboard-content {
            padding: 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .admin-stats-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-stats-grid-4 {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-cards-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-reports-grid {
            grid-template-columns: 1fr !important;
          }
          .admin-filter-grid {
            grid-template-columns: 1fr !important;
          }
          .admin-page-header {
            flex-direction: column;
            align-items: flex-start !important;
            gap: 12px;
          }
          .settings-grid {
            grid-template-columns: minmax(0, 1fr) !important;
          }
          .admin-modal-overlay {
            padding: 16px;
            align-items: flex-start;
            overflow-y: auto;
          }
          .admin-modal-box {
            max-height: calc(100vh - 32px);
            overflow-y: auto;
            width: 100%;
            margin: auto;
          }
          .admin-settings-buttons {
            flex-wrap: wrap;
          }
          .admin-settings-buttons button {
            min-width: 140px;
          }
          .admin-reports-table-wrap {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 0 -16px;
            padding: 0 16px;
          }
        }
        @media (max-width: 480px) {
          .admin-stats-grid,
          .admin-stats-grid-4,
          .admin-cards-grid {
            grid-template-columns: 1fr !important;
          }
          .admin-dashboard-tabs button {
            padding: 12px 14px !important;
          }
        }
        @media (max-width: 1024px) and (min-width: 769px) {
          .admin-stats-grid-4 {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-cards-grid {
            grid-template-columns: repeat(3, 1fr) !important;
          }
          .settings-grid {
            grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
            gap: 16px;
          }
        }
      `}),e.jsxs("div",{className:"admin-dashboard-root",style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsx($t,{...K}),e.jsxs("div",{className:"admin-dashboard-header",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flex:1},children:[e.jsx(ae,{size:"small"}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",margin:0},children:"Admin Dashboard"})]}),e.jsx(Vt,{onLogout:G})]}),e.jsx("div",{className:"admin-dashboard-tabs",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"0 24px",display:"flex",gap:"4px"},children:[{id:"dashboard",label:"Dashboard",icon:ct},{id:"staff",label:"Staff",icon:pt},{id:"windows",label:"Windows",icon:Ue},{id:"categories",label:"Categories",icon:He},{id:"reports",label:"Reports",icon:xt},{id:"settings",label:"Settings",icon:gt}].map(D=>{const Y=D.icon,U=i===D.id;return e.jsxs("button",{onClick:()=>o(D.id),style:{padding:"12px 20px",border:"none",background:U?"#eff6ff":"transparent",borderBottom:U?"3px solid #2563eb":"3px solid transparent",color:U?"#2563eb":"#64748b",fontWeight:U?"600":"400",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",borderRadius:"8px 8px 0 0"},onMouseOver:X=>{U||(X.target.style.background="#f1f5f9",X.target.style.color="#475569")},onMouseOut:X=>{U||(X.target.style.background="transparent",X.target.style.color="#64748b")},children:[e.jsx(Y,{size:18}),e.jsx("span",{children:D.label})]},D.id)})}),e.jsxs("div",{className:"admin-dashboard-content",style:{maxWidth:"1400px",margin:"0 auto",padding:"24px"},children:[i==="dashboard"&&e.jsx(Yt,{stats:p}),i==="staff"&&e.jsx(_t,{staff:h,categories:l,onRefresh:k,form:B,setForm:z,setInputDialog:v}),i==="windows"&&e.jsx(Qt,{windows:f,onRefresh:W,form:L,setForm:V}),i==="categories"&&e.jsx(Jt,{categories:l,onRefresh:P,categoryForm:T,setCategoryForm:A,subCategoryForm:q,setSubCategoryForm:H}),i==="reports"&&e.jsx(Kt,{reports:S,filters:g,setFilters:m,staff:h,categories:l,showFilters:d,setShowFilters:C,onRefresh:O}),i==="settings"&&e.jsx(Xt,{})]})]})]})}function Yt({stats:t}){const[i,o]=r.useState(new Date);if(r.useEffect(()=>{const s=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(s)},[]),!t)return e.jsx(ne,{});const a=s=>{const p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"],h=p[s.getDay()],c=j[s.getMonth()],f=s.getDate(),u=s.getFullYear();let l=s.getHours();const b=String(s.getMinutes()).padStart(2,"0"),S=String(s.getSeconds()).padStart(2,"0"),I=l>=12?"PM":"AM";return l=l%12,l=l||12,`${h}, ${c} ${f}, ${u} at ${l}:${b}:${S} ${I}`};return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:a(i)})}),e.jsxs("div",{className:"admin-stats-grid-4",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"16px"},children:[e.jsx(Z,{label:"Queue Entries Today",value:t.todayQueueEntries,icon:ut,color:"#2563eb"}),e.jsx(Z,{label:"Serving",value:t.servingCount,icon:ft,color:"#2563eb"}),e.jsx(Z,{label:"Waiting",value:t.waitingCount,icon:ht,color:"#f59e0b"}),e.jsx(Z,{label:"Served Today",value:t.todayServed,icon:De,color:"#10b981"})]}),e.jsxs("div",{className:"admin-stats-grid-4",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsx(Z,{label:"Active Windows",value:t.activeWindows,icon:mt,color:"#10b981"}),e.jsx(Z,{label:"Active Staff",value:t.activeStaff,icon:yt,color:"#10b981"}),e.jsx(Z,{label:"Total Windows",value:t.totalWindows,icon:bt,color:"#2563eb"}),e.jsx(Z,{label:"Total Staff",value:t.totalStaff,icon:jt,color:"#2563eb"})]})]})}function Z({label:t,value:i,color:o="#2563eb",icon:a}){return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[a&&e.jsx(a,{size:20,color:o,style:{flexShrink:0}}),e.jsx("div",{style:{fontSize:"14px",color:"#64748b",fontWeight:"500"},children:t})]}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:o,lineHeight:"1.2"},children:i||0})]})}function _t({staff:t,categories:i,onRefresh:o,form:a,setForm:s,setInputDialog:p}){const[j,h]=r.useState(null),[c,f]=r.useState(!1),u=r.useRef(null),[l,b]=r.useState({open:!1});r.useEffect(()=>{const d=C=>{u.current&&!u.current.contains(C.target)&&f(!1)};return c&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[c]);const S=async d=>{d.preventDefault();try{await w.post("/admin/staff",a.data),s({open:!1,data:{}}),$("Staff created successfully!"),o()}catch(C){M(ie(C,"Failed to create staff"))}},I=async d=>{d.preventDefault();try{await w.put(`/admin/staff/${j.id}`,a.data),s({open:!1,data:{}}),h(null),$("Staff updated successfully!"),o()}catch(C){M(ie(C,"Failed to update staff"))}},g=async(d,C)=>{try{await w.put(`/admin/staff/${d}`,{isActive:!C}),$(`Staff ${C?"deactivated":"activated"} successfully!`),o()}catch(B){M(ie(B,"Failed to update staff"))}},m=async(d,C)=>{p({open:!0,title:"Reset Password",message:`Enter new password for ${C}:`,placeholder:"New password (min 6 characters)",type:"password",onConfirm:async B=>{var z,L;if(p({open:!1}),!!B){if(B.length<6){M("Password must be at least 6 characters");return}try{await w.post(`/admin/staff/${d}/reset-password`,{password:B}),$("Password reset successfully!")}catch(V){M(((L=(z=V.response)==null?void 0:z.data)==null?void 0:L.error)||"Failed to reset password")}}},onCancel:()=>p({open:!1})})};return e.jsxs("div",{children:[e.jsx(fe,{...l}),e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Staff Management"}),e.jsx(N,{onClick:()=>{s({open:!0,data:{}}),h(null)},children:"Add Staff"})]}),a.open&&xe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{s({open:!1,data:{}}),h(null)},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:j?"Edit Staff":"Create Staff"}),e.jsx("button",{onClick:()=>{s({open:!1,data:{}}),h(null)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),e.jsxs("form",{onSubmit:j?I:S,children:[e.jsx(Q,{label:"Username",value:a.data.username||"",onChange:d=>s({...a,data:{...a.data,username:d.target.value}}),required:!j,disabled:!!j}),e.jsx(Q,{label:"Name",value:a.data.name||"",onChange:d=>s({...a,data:{...a.data,name:d.target.value}}),required:!0}),(!j||a.data.password)&&e.jsx(Q,{label:"Password",type:"password",value:a.data.password||"",onChange:d=>s({...a,data:{...a.data,password:d.target.value}}),required:!j}),e.jsxs("div",{style:{marginBottom:"16px",position:"relative"},ref:u,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:"Specializations (Categories)"}),e.jsx("div",{onClick:()=>f(!c),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:a.data.categoryIds&&a.data.categoryIds.length>0?a.data.categoryIds.map(d=>{const C=i.find(B=>B.id===d);return C?e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:B=>{B.stopPropagation(),s({...a,data:{...a.data,categoryIds:a.data.categoryIds.filter(z=>z!==d)}})},children:[C.name,e.jsx(_,{size:12})]},d):null}):e.jsx("span",{style:{color:"#94a3b8"},children:"Select categories..."})}),c&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:i.map(d=>{var B;const C=((B=a.data.categoryIds)==null?void 0:B.includes(d.id))||!1;return e.jsxs("div",{onClick:()=>{const z=a.data.categoryIds||[];s(C?{...a,data:{...a.data,categoryIds:z.filter(L=>L!==d.id)}}:{...a,data:{...a.data,categoryIds:[...z,d.id]}})},style:{padding:"10px 12px",cursor:"pointer",background:C?"#eff6ff":"white",color:C?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:z=>{C||(z.currentTarget.style.background="#f8fafc")},onMouseOut:z=>{C||(z.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:C,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:d.name})]},d.id)})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(N,{variant:"outline",icon:_,onClick:()=>{s({open:!1,data:{}}),h(null)},children:"Cancel"}),e.jsx(N,{type:"submit",icon:ge,children:j?"Update":"Create"})]})]})]})}),document.body),e.jsx("div",{className:"admin-cards-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:t.map(d=>{const C=d.name?d.name.split(" ").map(z=>z[0]).join("").toUpperCase().slice(0,2):d.username.charAt(0).toUpperCase(),B=d.specializations?d.specializations.map(z=>z.category.name):[];return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:d.profilePictureUrl?"transparent":"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",marginBottom:"8px",border:d.profilePictureUrl?"2px solid #e2e8f0":"none"},children:d.profilePictureUrl?e.jsx("img",{src:d.profilePictureUrl,alt:d.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"white",fontSize:"28px",fontWeight:"600"},children:C})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:d.name}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:d.username})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",justifyContent:"center",marginBottom:"8px"},children:B.length>0?B.map((z,L)=>e.jsx("span",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"12px",background:"#eff6ff",color:"#2563eb",fontWeight:"500"},children:z},L)):e.jsx("span",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"12px",background:"#f1f5f9",color:"#64748b",fontWeight:"500"},children:"All categories"})}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("span",{style:{fontSize:"11px",padding:"4px 12px",borderRadius:"12px",background:d.isActive?"#ecfdf5":"#fef2f2",color:d.isActive?"#059669":"#dc2626",fontWeight:"600"},children:d.isActive?"Active":"Inactive"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"auto",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{h(d),s({open:!0,data:{username:d.username,name:d.name,categoryIds:d.specializations?d.specializations.map(z=>z.categoryId):[]}})},style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"25%"},onMouseOver:z=>{z.target.style.background="#eff6ff"},onMouseOut:z=>{z.target.style.background="transparent"},children:[e.jsx(Be,{size:14}),"Edit"]}),e.jsxs("button",{onClick:()=>m(d.id,d.name),style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"75%"},onMouseOver:z=>{z.target.style.background="#eff6ff"},onMouseOut:z=>{z.target.style.background="transparent"},children:[e.jsx(vt,{size:14}),"Reset Password"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",width:"100%"},children:[e.jsx(N,{variant:d.isActive?"danger":"success",icon:wt,onClick:()=>g(d.id,d.isActive),style:{fontSize:"12px",padding:"6px 12px",flex:1},children:d.isActive?"Deactivate":"Activate"}),e.jsx(N,{variant:"danger",icon:je,onClick:()=>{b({open:!0,title:"Remove Staff",message:`Are you sure you want to remove ${d.name||d.username}? This cannot be undone and is only allowed if the staff has no serving history.`,onConfirm:async()=>{b({open:!1});try{await w.delete(`/admin/staff/${d.id}`),$("Staff removed successfully!"),o()}catch(z){M(ie(z,"Failed to remove staff"))}},onCancel:()=>b({open:!1})})},style:{fontSize:"12px",padding:"6px 12px",flex:1},children:"Remove"})]})]})]},d.id)})})]})}function Qt({windows:t,onRefresh:i,form:o,setForm:a}){const[s,p]=r.useState(null),[j,h]=r.useState({open:!1}),c=async l=>{l.preventDefault();try{await w.post("/admin/windows",o.data),a({open:!1,data:{}}),$("Window created successfully!"),i()}catch(b){M(ie(b,"Failed to create window"))}},f=async l=>{l.preventDefault();try{await w.put(`/admin/windows/${s.id}`,o.data),a({open:!1,data:{}}),p(null),$("Window updated successfully!"),i()}catch(b){M(ie(b,"Failed to update window"))}},u=async l=>{h({open:!0,title:"Delete Window",message:"Are you sure you want to delete this window? This action cannot be undone.",onConfirm:async()=>{h({open:!1});try{await w.delete(`/admin/windows/${l}`),$("Window deleted successfully!"),i()}catch(b){M(ie(b,"Failed to delete window"))}},onCancel:()=>h({open:!1})})};return e.jsxs("div",{children:[e.jsx(fe,{...j}),e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Window Management"}),e.jsx(N,{icon:ze,onClick:()=>{a({open:!0,data:{isActive:!0}}),p(null)},children:"Add Window"})]}),o.open&&xe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{a({open:!1,data:{}}),p(null)},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:s?"Edit Window":"Create Window"}),e.jsx("button",{onClick:()=>{a({open:!1,data:{}}),p(null)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),e.jsxs("form",{onSubmit:s?f:c,children:[e.jsx(Q,{label:"Window Label",value:o.data.label||"",onChange:l=>a({...o,data:{...o.data,label:l.target.value}}),required:!0}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("input",{type:"checkbox",checked:o.data.isActive!==!1,onChange:l=>a({...o,data:{...o.data,isActive:l.target.checked}})}),"Active"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(N,{variant:"outline",icon:_,onClick:()=>{a({open:!1,data:{}}),p(null)},children:"Cancel"}),e.jsx(N,{type:"submit",icon:ge,children:s?"Update":"Create"})]})]})]})}),document.body),e.jsx("div",{className:"admin-cards-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:t.map(l=>e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:e.jsx(Ue,{size:40,color:"white"})}),e.jsx("div",{style:{textAlign:"center",marginBottom:"8px"},children:e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:l.label})}),l.assignments&&l.assignments.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",justifyContent:"center",marginBottom:"8px"},children:l.assignments.map(b=>e.jsx("span",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"12px",background:"#eff6ff",color:"#2563eb",fontWeight:"500"},children:b.staff.name},b.id))}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("span",{style:{fontSize:"11px",padding:"4px 12px",borderRadius:"12px",background:l.isActive?"#ecfdf5":"#fef2f2",color:l.isActive?"#059669":"#dc2626",fontWeight:"600"},children:l.isActive?"Active":"Inactive"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"auto",width:"100%"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{p(l),a({open:!0,data:{label:l.label,isActive:l.isActive}})},style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"50%"},onMouseOver:b=>{b.target.style.background="#eff6ff"},onMouseOut:b=>{b.target.style.background="transparent"},children:[e.jsx(Be,{size:14}),"Edit"]}),e.jsx(N,{variant:"danger",icon:je,onClick:()=>u(l.id),style:{fontSize:"12px",padding:"6px 12px",width:"50%"},children:"Delete"})]})})]},l.id))})]})}function Jt({categories:t,onRefresh:i,categoryForm:o,setCategoryForm:a,subCategoryForm:s,setSubCategoryForm:p}){const[j,h]=r.useState(null),[c,f]=r.useState({open:!1}),u=async g=>{var m,d;g.preventDefault();try{await w.post("/admin/categories",o.data),a({open:!1,data:{}}),$("Category created successfully!"),i()}catch(C){M(((d=(m=C.response)==null?void 0:m.data)==null?void 0:d.error)||"Failed to create category")}},l=async g=>{var m,d;g.preventDefault();try{await w.put(`/admin/categories/${j.id}`,o.data),a({open:!1,data:{}}),h(null),$("Category updated successfully!"),i()}catch(C){M(((d=(m=C.response)==null?void 0:m.data)==null?void 0:d.error)||"Failed to update category")}},b=async g=>{f({open:!0,title:"Delete Category",message:"Are you sure you want to delete this category? All subcategories will be deleted. This action cannot be undone.",onConfirm:async()=>{var m,d;f({open:!1});try{await w.delete(`/admin/categories/${g}`),$("Category deleted successfully!"),i()}catch(C){M(((d=(m=C.response)==null?void 0:m.data)==null?void 0:d.error)||"Failed to delete category")}},onCancel:()=>f({open:!1})})},S=async g=>{var m,d;g.preventDefault();try{await w.post(`/admin/categories/${s.data.categoryId}/subcategories`,{name:s.data.name,description:s.data.description}),p({open:!1,data:{}}),$("Subcategory created successfully!"),i()}catch(C){M(((d=(m=C.response)==null?void 0:m.data)==null?void 0:d.error)||"Failed to create subcategory")}},I=async g=>{f({open:!0,title:"Delete Subcategory",message:"Are you sure you want to delete this subcategory? This action cannot be undone.",onConfirm:async()=>{var m,d;f({open:!1});try{await w.delete(`/admin/subcategories/${g}`),$("Subcategory deleted successfully!"),i()}catch(C){M(((d=(m=C.response)==null?void 0:m.data)==null?void 0:d.error)||"Failed to delete subcategory")}},onCancel:()=>f({open:!1})})};return e.jsxs("div",{children:[e.jsx(fe,{...c}),e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Category Management"}),e.jsx(N,{icon:ze,onClick:()=>{a({open:!0,data:{}}),h(null)},children:"Add Category"})]}),o.open&&xe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{a({open:!1,data:{}}),h(null)},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:j?"Edit Category":"Create Category"}),e.jsx("button",{onClick:()=>{a({open:!1,data:{}}),h(null)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),e.jsxs("form",{onSubmit:j?l:u,children:[e.jsx(Q,{label:"Category Name",value:o.data.name||"",onChange:g=>a({...o,data:{...o.data,name:g.target.value}}),required:!0}),e.jsx(Q,{label:"Description (Optional)",value:o.data.description||"",onChange:g=>a({...o,data:{...o.data,description:g.target.value}})}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(N,{variant:"outline",icon:_,onClick:()=>{a({open:!1,data:{}}),h(null)},children:"Cancel"}),e.jsx(N,{type:"submit",icon:ge,children:j?"Update":"Create"})]})]})]})}),document.body),s.open&&xe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{p({open:!1,data:{}})},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:"Add Subcategory"}),e.jsx("button",{onClick:()=>{p({open:!1,data:{}})},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),e.jsxs("form",{onSubmit:S,children:[e.jsx(Q,{label:"Subcategory Name",value:s.data.name||"",onChange:g=>p({...s,data:{...s.data,name:g.target.value}}),required:!0}),e.jsx(Q,{label:"Description (Optional)",value:s.data.description||"",onChange:g=>p({...s,data:{...s.data,description:g.target.value}})}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(N,{variant:"outline",icon:_,onClick:()=>{p({open:!1,data:{}})},children:"Cancel"}),e.jsx(N,{type:"submit",icon:ge,children:"Create"})]})]})]})}),document.body),e.jsx("div",{className:"admin-cards-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:t.map(g=>e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:e.jsx(He,{size:40,color:"white"})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:g.name}),g.description&&e.jsx("div",{style:{fontSize:"12px",color:"#64748b",lineHeight:"1.4"},children:g.description})]}),g.subCategories&&g.subCategories.length>0&&e.jsx("div",{style:{marginBottom:"8px"},children:e.jsxs("span",{style:{fontSize:"11px",padding:"4px 12px",borderRadius:"12px",background:"#eff6ff",color:"#2563eb",fontWeight:"600"},children:[g.subCategories.length," Subcategor",g.subCategories.length===1?"y":"ies"]})}),g.subCategories&&g.subCategories.length>0&&e.jsx("div",{style:{width:"100%",marginBottom:"8px",maxHeight:"120px",overflowY:"auto",padding:"8px",background:"#f8fafc",borderRadius:"8px"},children:g.subCategories.map(m=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 8px",marginBottom:"4px",background:"white",borderRadius:"6px",fontSize:"12px"},children:[e.jsx("span",{style:{fontWeight:"500",color:"#1e293b"},children:m.name}),e.jsx("button",{onClick:()=>I(m.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"2px 6px",fontSize:"12px",borderRadius:"4px"},onMouseOver:d=>{d.target.style.background="#fee2e2"},onMouseOut:d=>{d.target.style.background="transparent"},children:e.jsx(je,{size:12})})]},m.id))}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"auto",width:"100%"},children:[e.jsx(N,{variant:"outline",icon:ze,onClick:()=>{p({open:!0,data:{categoryId:g.id,name:"",description:""}})},style:{fontSize:"12px",padding:"6px 12px",width:"100%"},children:"Add Subcategory"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{h(g),a({open:!0,data:{name:g.name,description:g.description||""}})},style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"50%"},onMouseOver:m=>{m.target.style.background="#eff6ff"},onMouseOut:m=>{m.target.style.background="transparent"},children:[e.jsx(Be,{size:14}),"Edit"]}),e.jsx(N,{variant:"danger",icon:je,onClick:()=>b(g.id),style:{fontSize:"12px",padding:"6px 12px",width:"50%"},children:"Delete"})]})]})]},g.id))})]})}function Kt({reports:t,filters:i,setFilters:o,staff:a,categories:s,showFilters:p,setShowFilters:j,onRefresh:h}){const[c,f]=r.useState(i),[u,l]=r.useState(!1),[b,S]=r.useState(!1),[I,g]=r.useState(!1),m=r.useRef(null),d=r.useRef(null),C=r.useRef(null);r.useEffect(()=>{p&&f(i)},[p]),r.useEffect(()=>{const n=x=>{m.current&&!m.current.contains(x.target)&&l(!1),d.current&&!d.current.contains(x.target)&&S(!1),C.current&&!C.current.contains(x.target)&&g(!1)};return(u||b||I)&&document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[u,b,I]);const B=["REGULAR","SENIOR_CITIZEN","PWD","PREGNANT"],z=Array.from({length:24},(n,x)=>x),L=()=>{const n=new Date().toISOString().split("T")[0],x={startDate:n,endDate:n,staffIds:[],categoryIds:[],clientTypes:[],startHour:"",endHour:""};o(x),f(x)},V=()=>{o(c),j(!1)},T=()=>{f(i),j(!1)},A=i.staffIds.length>0||i.categoryIds.length>0||i.clientTypes.length>0||i.startHour||i.endHour;if(!t)return e.jsx(ne,{});const q=t.byCategory?Object.entries(t.byCategory).map(([n,x])=>({name:n,value:x})):[],H=t.byClientType?Object.entries(t.byClientType).map(([n,x])=>({name:n,value:x})):[],K=t.byStaff?Object.entries(t.byStaff).map(([n,x])=>({name:n,value:x})):[],v=t.byHour?Object.entries(t.byHour).sort((n,x)=>parseInt(n[0])-parseInt(x[0])).map(([n,x])=>({hour:`${n}:00`,value:x})):[];return e.jsxs("div",{children:[e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Reports & Analytics"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[A&&e.jsxs("button",{onClick:L,style:{fontSize:"14px",padding:"8px 16px",border:"none",background:"transparent",boxShadow:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontWeight:"500"},onMouseOver:n=>{n.target.style.color="#1e293b"},onMouseOut:n=>{n.target.style.color="#64748b"},children:[e.jsx(_,{size:16}),"Clear Filters"]}),e.jsxs("button",{onClick:()=>j(!0),style:{fontSize:"14px",padding:"8px 16px",border:"none",background:"transparent",boxShadow:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:A?"#2563eb":"#64748b",fontWeight:"500"},onMouseOver:n=>{n.target.style.color="#2563eb"},onMouseOut:n=>{n.target.style.color=A?"#2563eb":"#64748b"},children:[e.jsx(St,{size:16}),"Filters"]})]})]}),p&&xe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:T,className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"800px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:"Filter Reports"}),e.jsx("button",{onClick:T,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"admin-filter-grid",style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 2fr",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Start Date"}),e.jsx("input",{type:"date",value:c.startDate,onChange:n=>f({...c,startDate:n.target.value}),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"End Date"}),e.jsx("input",{type:"date",value:c.endDate,onChange:n=>f({...c,endDate:n.target.value}),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px"}})]}),e.jsxs("div",{style:{position:"relative"},ref:m,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Staff"}),e.jsx("div",{onClick:()=>l(!u),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:c.staffIds&&c.staffIds.length>0?c.staffIds.map(n=>{const x=a.find(k=>k.id===n);return x?e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:k=>{k.stopPropagation(),f({...c,staffIds:c.staffIds.filter(W=>W!==n)})},children:[x.name,e.jsx(_,{size:12})]},n):null}):e.jsx("span",{style:{color:"#94a3b8"},children:"Select staff..."})}),u&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:a.map(n=>{var k;const x=((k=c.staffIds)==null?void 0:k.includes(n.id))||!1;return e.jsxs("div",{onClick:()=>{const W=c.staffIds||[];f(x?{...c,staffIds:W.filter(P=>P!==n.id)}:{...c,staffIds:[...W,n.id]})},style:{padding:"10px 12px",cursor:"pointer",background:x?"#eff6ff":"white",color:x?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:W=>{x||(W.currentTarget.style.background="#f8fafc")},onMouseOut:W=>{x||(W.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:n.name})]},n.id)})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{style:{position:"relative"},ref:d,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Categories"}),e.jsx("div",{onClick:()=>S(!b),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:c.categoryIds&&c.categoryIds.length>0?c.categoryIds.map(n=>{const x=s.find(k=>k.id===n);return x?e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:k=>{k.stopPropagation(),f({...c,categoryIds:c.categoryIds.filter(W=>W!==n)})},children:[x.name,e.jsx(_,{size:12})]},n):null}):e.jsx("span",{style:{color:"#94a3b8"},children:"Select categories..."})}),b&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:s.map(n=>{var k;const x=((k=c.categoryIds)==null?void 0:k.includes(n.id))||!1;return e.jsxs("div",{onClick:()=>{const W=c.categoryIds||[];f(x?{...c,categoryIds:W.filter(P=>P!==n.id)}:{...c,categoryIds:[...W,n.id]})},style:{padding:"10px 12px",cursor:"pointer",background:x?"#eff6ff":"white",color:x?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:W=>{x||(W.currentTarget.style.background="#f8fafc")},onMouseOut:W=>{x||(W.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:n.name})]},n.id)})})]}),e.jsxs("div",{style:{position:"relative"},ref:C,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Client Types"}),e.jsx("div",{onClick:()=>g(!I),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:c.clientTypes&&c.clientTypes.length>0?c.clientTypes.map(n=>e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:x=>{x.stopPropagation(),f({...c,clientTypes:c.clientTypes.filter(k=>k!==n)})},children:[n.replace("_"," "),e.jsx(_,{size:12})]},n)):e.jsx("span",{style:{color:"#94a3b8"},children:"Select client types..."})}),I&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:B.map(n=>{var k;const x=((k=c.clientTypes)==null?void 0:k.includes(n))||!1;return e.jsxs("div",{onClick:()=>{const W=c.clientTypes||[];f(x?{...c,clientTypes:W.filter(P=>P!==n)}:{...c,clientTypes:[...W,n]})},style:{padding:"10px 12px",cursor:"pointer",background:x?"#eff6ff":"white",color:x?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:W=>{x||(W.currentTarget.style.background="#f8fafc")},onMouseOut:W=>{x||(W.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:n.replace("_"," ")})]},n)})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Start Hour (Peak Hours)"}),e.jsxs(Re,{value:c.startHour,onChange:n=>f({...c,startHour:n.target.value}),children:[e.jsx("option",{value:"",children:"All Hours"}),z.map(n=>e.jsxs("option",{value:n,children:[String(n).padStart(2,"0"),":00"]},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"End Hour (Peak Hours)"}),e.jsxs(Re,{value:c.endHour,onChange:n=>f({...c,endHour:n.target.value}),children:[e.jsx("option",{value:"",children:"All Hours"}),z.map(n=>e.jsxs("option",{value:n,children:[String(n).padStart(2,"0"),":00"]},n))]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #e2e8f0"},children:[e.jsx(N,{variant:"outline",icon:_,onClick:T,children:"Cancel"}),e.jsx(N,{variant:"primary",icon:ge,onClick:V,children:"Apply Filters"})]})]})}),document.body),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsx(Z,{label:"Total Served",value:t.totalServed}),e.jsx(Z,{label:"Average Duration",value:`${Math.floor((t.averageDuration||0)/60)}m ${(t.averageDuration||0)%60}s`})]}),e.jsxs("div",{className:"admin-reports-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[q.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"By Category"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(Te,{data:q,children:[e.jsx(me,{strokeDasharray:"3 3"}),e.jsx(ye,{dataKey:"name"}),e.jsx(be,{}),e.jsx(re,{}),e.jsx(We,{dataKey:"value",fill:"#2563eb"})]})})]}),H.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"By Client Type"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(qe,{children:[e.jsx(Ve,{data:H,cx:"50%",cy:"50%",labelLine:!1,label:({name:n,percent:x})=>`${n}: ${(x*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:H.map((n,x)=>e.jsx($e,{fill:Me[x%Me.length]},`cell-${x}`))}),e.jsx(re,{})]})})]})]}),v.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:"24px"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Peak Hours"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(Tt,{data:v,children:[e.jsx(me,{strokeDasharray:"3 3"}),e.jsx(ye,{dataKey:"hour"}),e.jsx(be,{}),e.jsx(re,{}),e.jsx(Wt,{type:"monotone",dataKey:"value",stroke:"#2563eb",strokeWidth:2})]})})]}),K.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"By Staff"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(Te,{data:K,children:[e.jsx(me,{strokeDasharray:"3 3"}),e.jsx(ye,{dataKey:"name"}),e.jsx(be,{}),e.jsx(re,{}),e.jsx(We,{dataKey:"value",fill:"#10b981"})]})})]})]})}function Xt(){const[t,i]=r.useState(null),[o,a]=r.useState(null),[s,p]=r.useState(null),[j,h]=r.useState(!0),[c,f]=r.useState(!1),[u,l]=r.useState({open:!1}),[b,S]=r.useState(null),[I,g]=r.useState(null),[m,d]=r.useState(!1),[C,B]=r.useState({open:!1}),[z,L]=r.useState([{id:"",name:""},{id:"",name:""},{id:"",name:""}]),[V,T]=r.useState(""),[A,q]=r.useState(!1),[H,K]=r.useState(""),[v,n]=r.useState(!1),[x,k]=r.useState(""),[W,P]=r.useState(!1),[O,G]=r.useState("branding");r.useEffect(()=>{D(),Y(),U(),X(),Se()},[]);const D=async()=>{try{const y=await w.get("/admin/settings/logo");y.data.logoUrl&&p(y.data.logoUrl)}catch(y){console.error("Failed to load logo:",y)}finally{h(!1)}},Y=async()=>{try{const y=await w.get("/admin/settings/ding-sound");y.data.dingSoundUrl&&g(y.data.dingSoundUrl)}catch(y){console.error("Failed to load ding sound:",y)}},U=async()=>{var y;try{const R=await w.get("/admin/settings/tts-voices"),E=Array.isArray(R.data.voices)?R.data.voices:[],F=[...E];for(;F.length<3;)F.push({id:"",name:""});L(F.slice(0,3)),R.data.activeVoiceId?T(R.data.activeVoiceId):(y=E[0])!=null&&y.id&&T(E[0].id)}catch(R){console.error("Failed to load TTS voices:",R)}},X=async()=>{try{const y=await w.get("/admin/settings/tts-announcement");y.data.template&&K(y.data.template)}catch(y){console.error("Failed to load TTS announcement template:",y)}},Se=async()=>{try{const y=await w.get("/admin/settings/video-folder");y.data.videoFolderPath&&k(y.data.videoFolderPath)}catch(y){console.error("Failed to load video folder path:",y)}},Ce=y=>{const R=y.target.files[0];if(R){i(R);const E=new FileReader;E.onloadend=()=>{a(E.result)},E.readAsDataURL(R)}},Ne=async y=>{var R,E;if(y.preventDefault(),!!t){f(!0);try{const F=new FormData;F.append("logo",t);const J=await w.post("/admin/settings/logo",F,{headers:{"Content-Type":"multipart/form-data"}});p(J.data.logoUrl),i(null),a(null),$("Logo uploaded successfully!")}catch(F){console.error("Failed to upload logo:",F),M(((E=(R=F.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to upload logo")}finally{f(!1)}}},ke=async()=>{l({open:!0,title:"Delete Logo",message:"Are you sure you want to delete the current logo?",onConfirm:async()=>{var y,R;l({open:!1});try{await w.delete("/admin/settings/logo"),p(null),i(null),a(null),$("Logo deleted successfully!")}catch(E){console.error("Failed to delete logo:",E),M(((R=(y=E.response)==null?void 0:y.data)==null?void 0:R.error)||"Failed to delete logo")}},onCancel:()=>l({open:!1})})},Ke=y=>{const R=y.target.files[0];R&&S(R)},Xe=async y=>{var R,E;if(y.preventDefault(),!!b){d(!0);try{const F=new FormData;F.append("sound",b);const J=await w.post("/admin/settings/ding-sound",F,{headers:{"Content-Type":"multipart/form-data"}});g(J.data.dingSoundUrl),S(null),$("Ding sound uploaded successfully!")}catch(F){console.error("Failed to upload ding sound:",F),M(((E=(R=F.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to upload ding sound")}finally{d(!1)}}},Ze=async()=>{B({open:!0,title:"Delete Ding Sound",message:"Are you sure you want to delete the current ding sound?",onConfirm:async()=>{var y,R;B({open:!1});try{await w.delete("/admin/settings/ding-sound"),g(null),S(null),$("Ding sound deleted successfully!")}catch(E){console.error("Failed to delete ding sound:",E),M(((R=(y=E.response)==null?void 0:y.data)==null?void 0:R.error)||"Failed to delete ding sound")}},onCancel:()=>B({open:!1})})},et=async y=>{var R,E;if(y.preventDefault(),!x.trim()){M("Video folder path cannot be empty");return}P(!0);try{await w.post("/admin/settings/video-folder",{videoFolderPath:x.trim()}),$("Video folder path updated successfully!")}catch(F){console.error("Failed to save video folder path:",F),M(((E=(R=F.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to save video folder path")}finally{P(!1)}},tt=async y=>{const R=typeof y=="string"?y.trim():"";if(!R){M("Please enter a voice ID first");return}const E="Window 1 will now serve number 123, or John Doe.";try{const J=(await w.post("/tts",{text:E,voiceId:R},{responseType:"arraybuffer"})).data;if(!J)return;const ce=new Blob([J],{type:"audio/mpeg"}),Ie=URL.createObjectURL(ce);new Audio(Ie).play().catch(oe=>{console.error("Failed to play preview TTS audio:",oe)}).finally(()=>{URL.revokeObjectURL(Ie)})}catch(F){console.error("Failed to preview TTS voice:",F),M("Failed to preview this voice. Please check your ElevenLabs settings.")}},Ee=(y,R,E)=>{L(F=>{const J=[...F];return J[y]={...J[y],[R]:E},J})},nt=async y=>{var R,E;y.preventDefault(),q(!0);try{const F=z.map(oe=>({id:(oe.id||"").trim(),name:(oe.name||"").trim()})).filter(oe=>oe.id);if(F.length===0){M("Please enter at least one ElevenLabs voice ID"),q(!1);return}const J=V&&F.some(oe=>oe.id===V)?V:F[0].id,ce=await w.post("/admin/settings/tts-voices",{voices:F,activeVoiceId:J}),he=[...Array.isArray(ce.data.voices)?ce.data.voices:F];for(;he.length<3;)he.push({id:"",name:""});L(he.slice(0,3)),T(ce.data.activeVoiceId||J),$("TTS voices updated successfully!")}catch(F){console.error("Failed to save TTS voices:",F),M(((E=(R=F.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to save TTS voices")}finally{q(!1)}},at=async y=>{var E,F;y.preventDefault();const R=(H||"").trim();if(!R){M("Announcement template cannot be empty");return}n(!0);try{await w.post("/admin/settings/tts-announcement",{template:R}),$("Announcement template updated successfully!")}catch(J){console.error("Failed to save announcement template:",J),M(((F=(E=J.response)==null?void 0:E.data)==null?void 0:F.error)||"Failed to save announcement template")}finally{n(!1)}};return j?e.jsx(ne,{}):e.jsxs("div",{children:[e.jsx(fe,{...u}),e.jsx(fe,{...C}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px"},children:"Settings"}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid #e2e8f0",paddingBottom:"4px",overflowX:"auto"},children:[{id:"branding",label:"Branding"},{id:"audio",label:"Audio & TTS"},{id:"videos",label:"Videos"}].map(y=>{const R=O===y.id;return e.jsx("button",{type:"button",onClick:()=>G(y.id),style:{padding:"8px 16px",borderRadius:"9999px",border:"none",backgroundColor:R?"#1d4ed8":"transparent",color:R?"#ffffff":"#475569",fontSize:"14px",fontWeight:R?600:500,cursor:"pointer",boxShadow:R?"0 1px 3px rgba(15, 23, 42, 0.25)":"none",whiteSpace:"nowrap"},children:y.label},y.id)})}),O==="branding"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #2563eb"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Logo"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Upload a logo to display across all pages. Supported formats: JPG, PNG, GIF, SVG, WebP (max 5MB)"}),s&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Current Logo:"}),e.jsx("img",{src:s,alt:"Current logo",style:{maxWidth:"200px",maxHeight:"100px",objectFit:"contain",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"}})]}),e.jsxs("form",{onSubmit:Ne,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Upload New Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ce,style:{width:"100%",padding:"8px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),o&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Preview:"}),e.jsx("img",{src:o,alt:"Preview",style:{maxWidth:"200px",maxHeight:"100px",objectFit:"contain",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"}})]}),e.jsxs("div",{className:"admin-settings-buttons",style:{display:"flex",gap:"8px"},children:[e.jsx(N,{type:"submit",disabled:!t||c,children:c?"Uploading...":"Upload Logo"}),s&&e.jsx(N,{variant:"danger",onClick:ke,children:"Delete Logo"})]})]})]})}),O==="audio"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #f97316"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Ding Sound (Announcement Chime)"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Upload a short audio file to play before each queue announcement on the public monitoring page. Supported formats: MP3, WAV, OGG, M4A, AAC (max 2MB). Keep it brief (under 2 seconds) for best results."}),I&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Current Ding Sound:"}),e.jsx("audio",{controls:!0,src:I,style:{width:"100%",maxWidth:"400px"},children:"Your browser does not support the audio element."})]}),e.jsxs("form",{onSubmit:Xe,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Upload New Ding Sound"}),e.jsx("input",{type:"file",accept:"audio/*",onChange:Ke,style:{width:"100%",padding:"8px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"admin-settings-buttons",style:{display:"flex",gap:"8px"},children:[e.jsx(N,{type:"submit",disabled:!b||m,children:m?"Uploading...":"Upload Ding Sound"}),I&&e.jsx(N,{variant:"danger",onClick:Ze,children:"Delete Ding Sound"})]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #0ea5e9"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Announcement Message Template"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"12px"},children:"Control what the voice will say when announcing a new client. You can use the following placeholders, which will be replaced automatically:"}),e.jsxs("ul",{style:{fontSize:"13px",color:"#64748b",marginBottom:"16px",paddingLeft:"20px"},children:[e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{window}}"})," â€” window label (e.g. Window 1)"]}),e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{queueNumber}}"})," â€” queue number counter (e.g. 6)"]}),e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{clientName}}"})," â€” client name (may be empty)"]}),e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{clientNamePart}}"})," â€” expands to ",e.jsx("code",{children:", or client name John Doe"})," when a name exists, or nothing otherwise"]})]}),e.jsxs("form",{onSubmit:at,children:[e.jsx("textarea",{value:H,onChange:y=>K(y.target.value),rows:3,style:{width:"100%",padding:"12px 14px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box"},placeholder:"Window {{window}} will now serve queue number {{queueNumber}}{{clientNamePart}}."}),e.jsx("div",{style:{marginTop:"12px",display:"flex",gap:"8px"},children:e.jsx(N,{type:"submit",disabled:v,children:v?"Saving Template...":"Save Template"})})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #10b981"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Text-to-Speech Voices (ElevenLabs)"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px"},children:"Configure up to three ElevenLabs voice IDs and choose which one is active for queue announcements. Voice IDs can be copied from your ElevenLabs dashboard."}),e.jsxs("form",{onSubmit:nt,children:[z.map((y,R)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.2fr) minmax(0, 1.4fr) auto",gap:"12px",marginBottom:"12px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",fontWeight:"500"},children:["Voice ",R+1," Name (optional)"]}),e.jsx("input",{type:"text",value:y.name||"",onChange:E=>Ee(R,"name",E.target.value),placeholder:"e.g. Front Desk Female",style:{width:"100%",padding:"8px 10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",fontWeight:"500"},children:["Voice ",R+1," ID"]}),e.jsx("input",{type:"text",value:y.id||"",onChange:E=>Ee(R,"id",E.target.value),placeholder:"ElevenLabs voice ID",style:{width:"100%",padding:"8px 10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[e.jsx("button",{type:"button",onClick:()=>tt(y.id),disabled:!y.id,style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:y.id?"#eff6ff":"#f8fafc",color:y.id?"#2563eb":"#94a3b8",fontSize:"12px",fontWeight:500,cursor:y.id?"pointer":"not-allowed"},children:"Preview Voice"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px"},children:[e.jsx("input",{type:"radio",name:"activeVoice",checked:!!y.id&&V===y.id,disabled:!y.id,onChange:()=>{y.id&&T(y.id)}}),"Active"]})]})]},R)),e.jsx("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:e.jsx(N,{type:"submit",disabled:A,children:A?"Saving Voices...":"Save Voices"})})]})]})]}),O==="videos"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #6366f1"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Video Folder Path"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Configure the local folder path where video files are stored. The system will scan this folder for video files (mp4, webm, ogg, mov, avi) to play on the public monitoring page."}),e.jsxs("form",{onSubmit:et,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Video Folder Path"}),e.jsx("input",{type:"text",value:x,onChange:y=>k(y.target.value),placeholder:"C:\\\\Users\\\\username\\\\videos or /Users/username/videos or videos",style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontFamily:"monospace",backgroundColor:"#f8fafc",color:"#1e293b",transition:"all 0.2s",boxSizing:"border-box"},onFocus:y=>{y.target.style.borderColor="#2563eb",y.target.style.backgroundColor="#ffffff",y.target.style.boxShadow="0 0 0 3px rgba(37, 99, 235, 0.1)"},onBlur:y=>{y.target.style.borderColor="#e2e8f0",y.target.style.backgroundColor="#f8fafc",y.target.style.boxShadow="none"}}),e.jsxs("p",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px",marginBottom:0},children:["Enter an absolute path (Windows: ",e.jsx("code",{style:{fontFamily:"monospace",fontSize:"11px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px"},children:"C:\\Users\\username\\videos"})," or Mac/Linux: ",e.jsx("code",{style:{fontFamily:"monospace",fontSize:"11px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px"},children:"/Users/username/videos"}),") or a relative path from the backend directory (e.g., ",e.jsx("code",{style:{fontFamily:"monospace",fontSize:"11px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px"},children:"videos"}),")"]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx(N,{type:"submit",disabled:W||!x.trim(),children:W?"Saving...":"Save Video Folder Path"})})]})]})})]})}function Zt(){return e.jsxs(e.Fragment,{children:[e.jsx(Mt,{}),e.jsxs(Ct,{children:[e.jsx(ee,{path:"/",element:e.jsx(Bt,{})}),e.jsx(ee,{path:"/success",element:e.jsx(Pt,{})}),e.jsx(ee,{path:"/thank-you",element:e.jsx(Nt,{})}),e.jsx(ee,{path:"/monitor",element:e.jsx(Et,{})}),e.jsx(ee,{path:"/staff/login",element:e.jsx(Ft,{})}),e.jsx(ee,{path:"/staff/dashboard",element:e.jsx(Ut,{})}),e.jsx(ee,{path:"/staff/profile",element:e.jsx(Ht,{})}),e.jsx(ee,{path:"/admin/login",element:e.jsx(qt,{})}),e.jsx(ee,{path:"/admin/dashboard",element:e.jsx(Gt,{})})]})]})}kt.createRoot(document.getElementById("root")).render(e.jsx(It.StrictMode,{children:e.jsx(zt,{children:e.jsx(Zt,{})})}));
